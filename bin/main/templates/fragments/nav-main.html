<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <title>네비바</title>
</head>

<body th:fragment="nav-main">
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js">
    </script>
    <script type="text/javascript">
        (function () {
            // 본인의 API keys를 넣어주세요.
            emailjs.init("gtos3lQPaG38HzxrW");
        })();
    </script>
    <style>
        .dropdown-toggle::after {
            transition: transform 0.15s linear;
        }

        .show.dropdown .dropdown-toggle::after {
            transform: translateY(3px);
        }

        .dropdown-menu {
            margin-top: 0;
        }

        .link-secondary:hover,
        .link-secondary:focus {
            color: white !important;
        }

        /* hover 메뉴때문에 넣음 */
    </style>
    <!-- 네비바 시작 -->
    <nav class="navbar fixed-top navbar-expand-lg navbar-dark border-bottom bg-dark">
        <div class="container-fluid">
            <!-- 홈 이동 -->
            <a class="navbar-brand" href="/">
                <img src="/assets/images/네비로고.png" alt="히어로랜딩_로고" width="87" class="d-inline-block align-text-top"></a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false"
                aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarSupportedContent">

                <ul class="navbar-nav me-auto mb-2 mb-lg-0">

                    <li class="nav-item">
                        <a class="nav-link" aria-current="page" href="/">Home</a>
                    </li>

                    <!-- 클릭된 a태그 클래스에 active 추가되야 함 -->
                    <!-- <li class="nav-item">
                        <a class="nav-link active" href="#">Link</a>
                    </li> -->
                    <li class="nav-item dropdown 호버드롭다운">
                        <a class="nav-link dropdown-toggle 호버토글" href="#" id="navbarDropdown" role="button"
                            data-bs-toggle="dropdown" aria-expanded="false">
                            게시판
                        </a>
                        <ul class="dropdown-menu 호버메뉴" aria-labelledby="navbarDropdown">

                            <li><a class="dropdown-item" href="/board/list/1">대륙별 전체 게시판</a></li>

                            <li>
                                <hr class="dropdown-divider">
                            </li>

                            <li>

                                <div class="dropend" href="#">
                                    <a type="button" class="dropdown-item dropdown-toggle" data-bs-toggle="dropdown"
                                        aria-expanded="false">
                                        아시아
                                    </a>
                                    <ul class="dropdown-menu m-0" data-bs-popper="static">

                                        <li><a class="dropdown-item" href="#"
                                                th:href="@{/board/listByType/{key}/{id}(key= ASIA, id = 1)}">아시아 전체
                                                게시판</a></li>
                                        <li>
                                            <hr class="dropdown-divider">
                                        </li>
                                        <li><a class="dropdown-item" href="#"
                                                th:href="@{/board/rangeSelect/{key}/{type}/{id}(key=ASIA,type=REVIEW, id = 1)}">후기
                                                게시판</a></li>
                                        <li><a class="dropdown-item" href="#"
                                                th:href="@{/board/rangeSelect/{key}/{type}/{id}(key=ASIA,type=FREE, id = 1)}">자유
                                                게시판</a></li>
                                        <li><a class="dropdown-item" href="#"
                                                th:href="@{/board/rangeSelect/{key}/{type}/{id}(key=ASIA,type=FOOD, id = 1)}">맛집
                                                게시판</a></li>


                                    </ul>
                                </div>
                            </li>

                            <li>
                                <div class="dropend" href="#">
                                    <a type="button" class="dropdown-item dropdown-toggle" data-bs-toggle="dropdown"
                                        aria-expanded="false">
                                        유럽
                                    </a>
                                    <ul class="dropdown-menu m-0" data-bs-popper="static">
                                        <li><a class="dropdown-item" href="#"
                                                th:href="@{/board/listByType/{key}/{id}(key= EUROPE, id = 1)}">유럽 전체
                                                게시판</a></li>
                                        <li>
                                            <hr class="dropdown-divider">
                                        </li>
                                        <li><a class="dropdown-item" href="#"
                                                th:href="@{/board/rangeSelect/{key}/{type}/{id}(key=EUROPE,type= REVIEW , id = 1)}">후기
                                                게시판</a></li>
                                        <li><a class="dropdown-item" href="#"
                                                th:href="@{/board/rangeSelect/{key}/{type}/{id}(key=EUROPE,type= FREE , id = 1)}">자유
                                                게시판</a></li>
                                        <li><a class="dropdown-item" href="#"
                                                th:href="@{/board/rangeSelect/{key}/{type}/{id}(key=EUROPE,type= FOOD , id = 1)}">맛집
                                                게시판</a></li>

                                    </ul>
                                </div>
                            </li>

                            <li>
                                <div class="dropend" href="#">
                                    <a type="button" class="dropdown-item dropdown-toggle" data-bs-toggle="dropdown"
                                        aria-expanded="false">
                                        북아메리카
                                    </a>
                                    <ul class="dropdown-menu m-0" data-bs-popper="static">
                                        <li><a class="dropdown-item" href="#"
                                                th:href="@{/board/listByType/{key}/{id}(key= NorthAmerica , id = 1)}">북아메리카
                                                전체 게시판</a></li>
                                        <li>
                                            <hr class="dropdown-divider">
                                        </li>
                                        <li><a class="dropdown-item" href="#"
                                                th:href="@{/board/rangeSelect/{key}/{type}/{id}(key= NorthAmerica ,type= REVIEW , id = 1)}">후기
                                                게시판</a></li>
                                        <li><a class="dropdown-item" href="#"
                                                th:href="@{/board/rangeSelect/{key}/{type}/{id}(key= NorthAmerica ,type= FREE , id = 1)}">자유
                                                게시판</a></li>
                                        <li><a class="dropdown-item" href="#"
                                                th:href="@{/board/rangeSelect/{key}/{type}/{id}(key= NorthAmerica ,type= FOOD , id = 1)}">맛집
                                                게시판</a></li>

                                    </ul>
                                </div>
                            </li>

                            <li>
                                <div class="dropend" href="#">
                                    <a type="button" class="dropdown-item dropdown-toggle" data-bs-toggle="dropdown"
                                        aria-expanded="false">
                                        남아메리카
                                    </a>
                                    <ul class="dropdown-menu m-0" data-bs-popper="static">
                                        <li><a class="dropdown-item" href="#"
                                                th:href="@{/board/listByType/{key}/{id}(key= SouthAmerica , id = 1)}">남아메리카
                                                전체 게시판</a></li>
                                        <li>
                                            <hr class="dropdown-divider">
                                        </li>
                                        <li><a class="dropdown-item" href="#"
                                                th:href="@{/board/rangeSelect/{key}/{type}/{id}(key= SouthAmerica ,type= REVIEW , id = 1)}">후기
                                                게시판</a></li>
                                        <li><a class="dropdown-item" href="#"
                                                th:href="@{/board/rangeSelect/{key}/{type}/{id}(key= SouthAmerica ,type= FREE , id = 1)}">자유
                                                게시판</a></li>
                                        <li><a class="dropdown-item" href="#"
                                                th:href="@{/board/rangeSelect/{key}/{type}/{id}(key= SouthAmerica ,type= FOOD , id = 1)}">맛집
                                                게시판</a></li>
                                    </ul>

                                </div>
                            </li>

                            <li>
                                <div class="dropend" href="#">
                                    <a type="button" class="dropdown-item dropdown-toggle" data-bs-toggle="dropdown"
                                        aria-expanded="false">
                                        아프리카
                                    </a>
                                    <ul class="dropdown-menu m-0" data-bs-popper="static">
                                        <li><a class="dropdown-item" href="#"
                                                th:href="@{/board/listByType/{key}/{id}(key= AFRICA , id = 1)}">아프리카 전체
                                                게시판</a></li>
                                        <li>
                                            <hr class="dropdown-divider">
                                        </li>
                                        <li><a class="dropdown-item" href="#"
                                                th:href="@{/board/rangeSelect/{key}/{type}/{id}(key= AFRICA ,type= REVIEW , id = 1)}">후기
                                                게시판</a></li>
                                        <li><a class="dropdown-item" href="#"
                                                th:href="@{/board/rangeSelect/{key}/{type}/{id}(key= AFRICA ,type= FREE , id = 1)}">자유
                                                게시판</a></li>
                                        <li><a class="dropdown-item" href="#"
                                                th:href="@{/board/rangeSelect/{key}/{type}/{id}(key= AFRICA ,type= FOOD , id = 1)}">맛집
                                                게시판</a></li>

                                    </ul>
                                </div>
                            </li>

                            <li>
                                <div class="dropend" href="#">
                                    <a type="button" class="dropdown-item dropdown-toggle" data-bs-toggle="dropdown"
                                        aria-expanded="false">
                                        오세아니아
                                    </a>
                                    <ul class="dropdown-menu m-0" data-bs-popper="static">
                                        <li><a class="dropdown-item" href="#"
                                                th:href="@{/board/listByType/{key}/{id}(key= OCEANIA , id = 1)}">오세아니아
                                                전체 게시판</a></li>
                                        <li>
                                            <hr class="dropdown-divider">
                                        </li>
                                        <li><a class="dropdown-item" href="#"
                                                th:href="@{/board/rangeSelect/{key}/{type}/{id}(key= OCEANIA ,type= REVIEW , id = 1)}">후기
                                                게시판</a></li>
                                        <li><a class="dropdown-item" href="#"
                                                th:href="@{/board/rangeSelect/{key}/{type}/{id}(key= OCEANIA ,type= FREE , id = 1)}">자유
                                                게시판</a></li>
                                        <li><a class="dropdown-item" href="#"
                                                th:href="@{/board/rangeSelect/{key}/{type}/{id}(key= OCEANIA ,type= FOOD , id = 1)}">맛집
                                                게시판</a></li>

                                    </ul>
                                </div>
                            </li>

                        </ul>


                    </li>
                    <!-- 소영 -->
                    <!-- 문의하기 모달창 a 태그  -->
                    <li class="nav-item">
                        <!-- <th:block th:if="${session.loginMember != null}"> -->
                        <a class="nav-link" href="#" data-bs-toggle="modal" data-bs-target="#exampleModal">문의하기</a>
                        <!-- </th:block> -->
                    </li>
                </ul>

                <!-- 네비바 우측 메뉴 -->
                <div class="d-flex align-self-center">
                    <!-- 회원 유저 이름 박스(일단 닉네임으로 작업해놓음) -->
                    <th:block th:if="${session.loginMember != null}">
                        <div class="align-self-center">
                            <p class="text-light p-0 m-0" th:text="${session.loginMember.memberName}"></p>
                        </div>
                        <a class="btn btn-link link-secondary text-decoration-none ps-0 me-2"
                            th:onclick="|location.href='@{/mypage/mypageForm}'|">님의 마이페이지</a>
                    </th:block>
                    <th:block th:unless="${session.loginMember != null}">
                        <!-- 로그인 버튼 -->
                        <button class="btn btn-outline-primary me-2" onclick="location.href='login.html'"
                            th:onclick="|location.href='@{/login/loginForm}'|" type="button">로그인</button>
                    </th:block>

                    <th:block th:if="${session.loginMember != null}">
                        <button class="btn btn-outline-danger" type="button"
                            th:onclick="|location.href='@{/logout/index}'|">로그아웃</button>
                    </th:block>
                    <th:block th:unless="${session.loginMember != null}">
                        <!-- 회원가입 -->
                        <button class="btn btn-outline-primary" onclick="location.href='join.html'"
                            th:onclick="|location.href='@{/joins/new}'|" type="button">회원가입</button>
                    </th:block>
                </div>
            </div>
        </div>
    </nav>

    <!-- 소영 -->
    <!-- 제목, 내용, 발송하기버튼 모달창 -->
    <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">문의하기</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form>
                        <!-- 보낸사람 -->
                        <th:block th:if="${session.loginMember != null}">
                            <div class="d-none" th:text="${session.loginMember.memberName}" id="name"></div>
                        </th:block>
                        <th:block th:unless="${session.loginMember != null}">
                            <div class="mb-3">
                                <label for="name" class="col-form-label">이름</label>
                                <input type="text" class="form-control" id="name">
                            </div>
                        </th:block>

                        <!-- 연락처 -->
                        <th:block th:if="${session.loginMember != null}">
                            <div class="d-none" th:text="${session.loginMember.memberPhoneNum}" id="phone"></div>
                        </th:block>
                        <th:block th:unless="${session.loginMember != null}">
                            <div class="mb-3">
                                <label for="phone" class="col-form-label">연락처</label>
                                <input type="text" class="form-control" id="phone">
                            </div>
                        </th:block>

                        <!-- 메일 주소 -->
                        <th:block th:if="${session.loginMember != null}">
                            <div class="d-none" th:text="${session.loginMember.memberEmail}" id="email"></div>
                        </th:block>
                        <th:block th:unless="${session.loginMember != null}">
                            <div class="mb-3">
                                <label for="email" class="col-form-label">이메일</label>
                                <input type="text" class="form-control" id="email">
                            </div>
                        </th:block>

                        <div class="mb-3">
                            <label for="title" class="col-form-label">제목</label>
                            <input type="text" class="form-control" id="title">
                        </div>
                        <div class="mb-3">
                            <label for="message" class="col-form-label">내용</label>
                            <textarea class="form-control" id="message"></textarea>
                        </div>
                    </form>
                </div>

                <div class="modal-footer">
                    <button type="reset" class="btn btn-secondary" data-bs-dismiss="modal" onclick="문의하기모달창초기화()">닫기</button>
                    <!-- sendMail 발송하기 버튼 -->
                    <th:block th:if="${session.loginMember != null}">
                        <!-- 전송하고 닫기 -->
                        <button class="btn btn-primary" onclick="check2()">발송하기</button>
                    </th:block>
                    <th:block th:unless="${session.loginMember != null}">
                        <button class="btn btn-primary" onclick="check1()">발송하기</button>
                    </th:block>
                </div>

            </div>
        </div>
    </div>

    <!-- 네비바 호버 이벤트 -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script type="text/javascript">
        var $dropdown = $(".navbar-nav .dropend");
        var $dropdownToggle = $(".dropdown-toggle");
        var $dropdownMenu = $(".dropdown-menu");
        var showClass = "show";
        // 최소폭 이상에서만 호버 이벤트
        $(window).on("load resize", function () {
            if (this.matchMedia("(min-width: 990px)").matches) {
                $dropdown.hover(
                    function () {
                        var $this = $(this);
                        $this.addClass(showClass);
                        $this.find($dropdownToggle).attr("aria-expanded", "true");
                        $this.find($dropdownMenu).addClass(showClass);
                    },
                    function () {
                        var $this = $(this);
                        $this.removeClass(showClass);
                        $this.find($dropdownToggle).attr("aria-expanded", "false");
                        $this.find($dropdownMenu).removeClass(showClass);

                    }
                );
            } else {
                $dropdown.off("mouseenter mouseleave");
            }
        });

        // 게시판 버튼만 호버
        var $dropdown2 = $(".navbar-nav .호버드롭다운");
        var $dropdownToggle2 = $(".호버토글");
        var $dropdownMenu2 = $(".호버메뉴");
        var showClass2 = "show";
        // 최소폭 이상에서만 호버 이벤트
        $(window).on("load resize", function () {
            if (this.matchMedia("(min-width: 990px)").matches) {
                $dropdown2.hover(
                    function () {
                        var $this = $(this);
                        $this.addClass(showClass2);
                        $this.find($dropdownToggle2).attr("aria-expanded", "true");
                        $this.find($dropdownMenu2).addClass(showClass2);
                    },
                    function () {
                        var $this = $(this);
                        $this.removeClass(showClass2);
                        $this.find($dropdownToggle2).attr("aria-expanded", "false");
                        $this.find($dropdownMenu2).removeClass(showClass2);

                    }
                );
            } else {
                $dropdown2.off("mouseenter mouseleave");
            }
        });

        // 모바일에서는 게시판 항상 보기
        $(window).on("load resize", function () {
            if (this.matchMedia("(max-width: 990px)").matches) {
                $dropdown2.addClass(showClass2);
                $dropdown2.find($dropdownToggle2).attr("aria-expanded", "true");
                $dropdown2.find($dropdownMenu2).addClass(showClass2);
            } else {
                $dropdown2.removeClass(showClass2);
                $dropdown2.find($dropdownToggle2).attr("aria-expanded", "false");
                $dropdown2.find($dropdownMenu2).removeClass(showClass2);
            }
        });
    </script>
<!--     <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script> -->
<!--     <script src="/js/email.js"></script> -->
</body>

</html>